<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Disco-C: include/utils/cache.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Disco-C
   </div>
   <div id="projectbrief">Discord C Bot Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_821002d4f10779a80d4fb17bc32f21f1.html">utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cache.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="channel_8h_source.html">discord/channel.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="guild_8h_source.html">discord/guild.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="message_8h_source.html">discord/message.h</a>&gt;</code><br />
<code>#include &lt;hashmap.h/hashmap.h&gt;</code><br />
</div>
<p><a href="cache_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a3a2c76967f7fd059bb4ca547a911599e"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#a3a2c76967f7fd059bb4ca547a911599e">cache_destroy_callback_fn</a>) (enum <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111f">Disco_Cache_Type</a> type, void *structure)</td></tr>
<tr class="memdesc:a3a2c76967f7fd059bb4ca547a911599e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that will be called if the max cache size is reached.  <a href="cache_8h.html#a3a2c76967f7fd059bb4ca547a911599e">More...</a><br /></td></tr>
<tr class="separator:a3a2c76967f7fd059bb4ca547a911599e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a85169eef86ba65be6fcacdc0c0ae111f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111f">Disco_Cache_Type</a> { <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa3a2f910ba186e0dabbd5f1cb3f407596">DISCO_CHANNEL_CACHE</a>, 
<a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa6af48f8fcedaa55454ebb742bb48396e">DISCO_MESSAGE_CACHE</a>, 
<a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa41bf87ec949bbcf37d261b6d5c339b98">DISCO_GUILD_CACHE</a>
 }</td></tr>
<tr class="separator:a85169eef86ba65be6fcacdc0c0ae111f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4d8331ae5a2c94953a5e668299668011"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#a4d8331ae5a2c94953a5e668299668011">discord_cache_init</a> (int message_cache_size, int channel_cache_size, int guild_cache_size, <a class="el" href="cache_8h.html#a3a2c76967f7fd059bb4ca547a911599e">cache_destroy_callback_fn</a> callback)</td></tr>
<tr class="memdesc:a4d8331ae5a2c94953a5e668299668011"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes all the caches.  <a href="cache_8h.html#a4d8331ae5a2c94953a5e668299668011">More...</a><br /></td></tr>
<tr class="separator:a4d8331ae5a2c94953a5e668299668011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81a1c1e1b3972c8e9dcbc90cca2ec195"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#a81a1c1e1b3972c8e9dcbc90cca2ec195">discord_cache_destroy</a> (void)</td></tr>
<tr class="memdesc:a81a1c1e1b3972c8e9dcbc90cca2ec195"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans up the cache and frees all the structs it contains.  <a href="cache_8h.html#a81a1c1e1b3972c8e9dcbc90cca2ec195">More...</a><br /></td></tr>
<tr class="separator:a81a1c1e1b3972c8e9dcbc90cca2ec195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d885224d57ff6aa08ece206a1e44586"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#a0d885224d57ff6aa08ece206a1e44586">discord_cache_set_message</a> (struct <a class="el" href="structdiscord__message.html">discord_message</a> *message)</td></tr>
<tr class="memdesc:a0d885224d57ff6aa08ece206a1e44586"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a message to the cache by ID.  <a href="cache_8h.html#a0d885224d57ff6aa08ece206a1e44586">More...</a><br /></td></tr>
<tr class="separator:a0d885224d57ff6aa08ece206a1e44586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a296a64475d6debc510dace71c0291c76"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdiscord__message.html">discord_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#a296a64475d6debc510dace71c0291c76">discord_cache_get_message</a> (uint64_t id)</td></tr>
<tr class="memdesc:a296a64475d6debc510dace71c0291c76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a message by ID in the cache.  <a href="cache_8h.html#a296a64475d6debc510dace71c0291c76">More...</a><br /></td></tr>
<tr class="separator:a296a64475d6debc510dace71c0291c76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad99724bf217d9eab3de06d27142e4699"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#ad99724bf217d9eab3de06d27142e4699">discord_cache_delete_message</a> (uint64_t id)</td></tr>
<tr class="memdesc:ad99724bf217d9eab3de06d27142e4699"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a message from the cache and deallocates the message from memory.  <a href="cache_8h.html#ad99724bf217d9eab3de06d27142e4699">More...</a><br /></td></tr>
<tr class="separator:ad99724bf217d9eab3de06d27142e4699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a215176bc3913ce064686502970de2a30"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#a215176bc3913ce064686502970de2a30">discord_cache_set_channel</a> (struct <a class="el" href="structdiscord__channel.html">discord_channel</a> *channel)</td></tr>
<tr class="memdesc:a215176bc3913ce064686502970de2a30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a channel to the cache by ID.  <a href="cache_8h.html#a215176bc3913ce064686502970de2a30">More...</a><br /></td></tr>
<tr class="separator:a215176bc3913ce064686502970de2a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb6845fdf41a71ceb0310278b4fd81f8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdiscord__channel.html">discord_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#acb6845fdf41a71ceb0310278b4fd81f8">discord_cache_get_channel</a> (uint64_t id)</td></tr>
<tr class="memdesc:acb6845fdf41a71ceb0310278b4fd81f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a channel by ID in the cache.  <a href="cache_8h.html#acb6845fdf41a71ceb0310278b4fd81f8">More...</a><br /></td></tr>
<tr class="separator:acb6845fdf41a71ceb0310278b4fd81f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11df7744ff41f0fec695a2ef3893f879"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#a11df7744ff41f0fec695a2ef3893f879">discord_cache_delete_channel</a> (uint64_t id)</td></tr>
<tr class="memdesc:a11df7744ff41f0fec695a2ef3893f879"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a channel from the cache and deallocates the channel from memory.  <a href="cache_8h.html#a11df7744ff41f0fec695a2ef3893f879">More...</a><br /></td></tr>
<tr class="separator:a11df7744ff41f0fec695a2ef3893f879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad143b7c2d82fce0dc2cd2cabce1f1d3e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#ad143b7c2d82fce0dc2cd2cabce1f1d3e">discord_cache_set_guild</a> (struct <a class="el" href="structdiscord__guild.html">discord_guild</a> *guild)</td></tr>
<tr class="memdesc:ad143b7c2d82fce0dc2cd2cabce1f1d3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a guild to the cache by ID.  <a href="cache_8h.html#ad143b7c2d82fce0dc2cd2cabce1f1d3e">More...</a><br /></td></tr>
<tr class="separator:ad143b7c2d82fce0dc2cd2cabce1f1d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0de846d3068f6e1c2bb78104209e7cc5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdiscord__guild.html">discord_guild</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#a0de846d3068f6e1c2bb78104209e7cc5">discord_cache_get_guild</a> (uint64_t id)</td></tr>
<tr class="memdesc:a0de846d3068f6e1c2bb78104209e7cc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a guild by ID in the cache.  <a href="cache_8h.html#a0de846d3068f6e1c2bb78104209e7cc5">More...</a><br /></td></tr>
<tr class="separator:a0de846d3068f6e1c2bb78104209e7cc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0559549aa01d2930e7a798654b57e0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#ad0559549aa01d2930e7a798654b57e0b">discord_cache_delete_guild</a> (uint64_t id)</td></tr>
<tr class="memdesc:ad0559549aa01d2930e7a798654b57e0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a guild from the cache and deallocates the guild from memory.  <a href="cache_8h.html#ad0559549aa01d2930e7a798654b57e0b">More...</a><br /></td></tr>
<tr class="separator:ad0559549aa01d2930e7a798654b57e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a3a2c76967f7fd059bb4ca547a911599e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a2c76967f7fd059bb4ca547a911599e">&#9670;&nbsp;</a></span>cache_destroy_callback_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* cache_destroy_callback_fn) (enum <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111f">Disco_Cache_Type</a> type, void *structure)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that will be called if the max cache size is reached. </p>
<p>This allows the user to choose what do with the structure however they want. The user can choose to simply destroy the structure or they can also add the structure back into the cache based on a condition (Note this can result in an infinite loop if one chooses to add the element back in the queue resulting in a new element being removed).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of structure </td></tr>
    <tr><td class="paramname">structure</td><td>Pointer to the actual structure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a85169eef86ba65be6fcacdc0c0ae111f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85169eef86ba65be6fcacdc0c0ae111f">&#9670;&nbsp;</a></span>Disco_Cache_Type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111f">Disco_Cache_Type</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a85169eef86ba65be6fcacdc0c0ae111fa3a2f910ba186e0dabbd5f1cb3f407596"></a>DISCO_CHANNEL_CACHE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a85169eef86ba65be6fcacdc0c0ae111fa6af48f8fcedaa55454ebb742bb48396e"></a>DISCO_MESSAGE_CACHE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a85169eef86ba65be6fcacdc0c0ae111fa41bf87ec949bbcf37d261b6d5c339b98"></a>DISCO_GUILD_CACHE&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a11df7744ff41f0fec695a2ef3893f879"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11df7744ff41f0fec695a2ef3893f879">&#9670;&nbsp;</a></span>discord_cache_delete_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void discord_cache_delete_channel </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a channel from the cache and deallocates the channel from memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>ID of the channel to remove </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa3a2f910ba186e0dabbd5f1cb3f407596">DISCO_CHANNEL_CACHE</a>, and <a class="el" href="cache_8c.html#ae0a8a7e7cc948fec00738188fab562dc">discord_cache_delete()</a>.</p>

<p class="reference">Referenced by <a class="el" href="cache_8c.html#afa32f0b9ef9d24b124394bc8aa2dd355">discord_cache_set()</a>.</p>

</div>
</div>
<a id="ad0559549aa01d2930e7a798654b57e0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0559549aa01d2930e7a798654b57e0b">&#9670;&nbsp;</a></span>discord_cache_delete_guild()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void discord_cache_delete_guild </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a guild from the cache and deallocates the guild from memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>ID of the guild to remove </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa41bf87ec949bbcf37d261b6d5c339b98">DISCO_GUILD_CACHE</a>, and <a class="el" href="cache_8c.html#ae0a8a7e7cc948fec00738188fab562dc">discord_cache_delete()</a>.</p>

<p class="reference">Referenced by <a class="el" href="cache_8c.html#afa32f0b9ef9d24b124394bc8aa2dd355">discord_cache_set()</a>.</p>

</div>
</div>
<a id="ad99724bf217d9eab3de06d27142e4699"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad99724bf217d9eab3de06d27142e4699">&#9670;&nbsp;</a></span>discord_cache_delete_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void discord_cache_delete_message </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a message from the cache and deallocates the message from memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>ID of the message to remove </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa6af48f8fcedaa55454ebb742bb48396e">DISCO_MESSAGE_CACHE</a>, and <a class="el" href="cache_8c.html#ae0a8a7e7cc948fec00738188fab562dc">discord_cache_delete()</a>.</p>

<p class="reference">Referenced by <a class="el" href="cache_8c.html#afa32f0b9ef9d24b124394bc8aa2dd355">discord_cache_set()</a>.</p>

</div>
</div>
<a id="a81a1c1e1b3972c8e9dcbc90cca2ec195"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81a1c1e1b3972c8e9dcbc90cca2ec195">&#9670;&nbsp;</a></span>discord_cache_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void discord_cache_destroy </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cleans up the cache and frees all the structs it contains. </p>

<p class="reference">References <a class="el" href="structnode.html#ab994a562b7b2a11d7586e1093800f5a4">node::alloc_id</a>, <a class="el" href="cache_8c.html#a069029f5476e51f2a2978b9f32eb1861">channels_map</a>, <a class="el" href="cache_8c.html#a676ccc5ac8c134cdb237ee1889a49706">channels_queue</a>, <a class="el" href="structnode.html#ae82853bbf3b0d2b71de205ae40799555">node::data</a>, <a class="el" href="cache_8c.html#a64447acacfa22d39689a8cea43560939">destroy_item_callback_fn</a>, <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa3a2f910ba186e0dabbd5f1cb3f407596">DISCO_CHANNEL_CACHE</a>, <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa41bf87ec949bbcf37d261b6d5c339b98">DISCO_GUILD_CACHE</a>, <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa6af48f8fcedaa55454ebb742bb48396e">DISCO_MESSAGE_CACHE</a>, <a class="el" href="cache_8c.html#a37b932c9356ec20b4ec3dabc18074781">guilds_map</a>, <a class="el" href="cache_8c.html#a91da2e78aae387f8009aa28741255488">guilds_queue</a>, <a class="el" href="structbuffer.html#a1d6fe81b3ccc1b5ff1253ea6eac1a300">buffer::head</a>, <a class="el" href="cache_8c.html#aae79345d0d5fe7ade7fc06b746ed93fd">messages_map</a>, <a class="el" href="cache_8c.html#abae5844af77f07ebc5ec8630d2392af7">messages_queue</a>, <a class="el" href="structnode.html#a8522b9b5a7f1657e8c7a0ae48df93519">node::pointers</a>, and <a class="el" href="structbuffer.html#af3f397315f9d1257c0b271d6692c9e14">buffer::size</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___client.html#gab4c31f13fcbde9d2441bd7f2397983c1">discord_start_bot()</a>.</p>

</div>
</div>
<a id="acb6845fdf41a71ceb0310278b4fd81f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb6845fdf41a71ceb0310278b4fd81f8">&#9670;&nbsp;</a></span>discord_cache_get_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdiscord__channel.html">discord_channel</a>* discord_cache_get_channel </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves a channel by ID in the cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>struct discord_channel* Pointer to the channel struct. NULL if the channel is not in the cache. </dd></dl>

<p class="reference">References <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa3a2f910ba186e0dabbd5f1cb3f407596">DISCO_CHANNEL_CACHE</a>, and <a class="el" href="cache_8c.html#aa5366c2d4251b830eb61d7edbebef12e">discord_cache_get()</a>.</p>

<p class="reference">Referenced by <a class="el" href="event_8c.html#ac3984c74b045e0afadbf2f69ed76f597">event_handle()</a>.</p>

</div>
</div>
<a id="a0de846d3068f6e1c2bb78104209e7cc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0de846d3068f6e1c2bb78104209e7cc5">&#9670;&nbsp;</a></span>discord_cache_get_guild()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdiscord__guild.html">discord_guild</a>* discord_cache_get_guild </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves a guild by ID in the cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>struct discord_guild* Pointer to the guild struct. NULL if the guild is not in the cache. </dd></dl>

<p class="reference">References <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa41bf87ec949bbcf37d261b6d5c339b98">DISCO_GUILD_CACHE</a>, and <a class="el" href="cache_8c.html#aa5366c2d4251b830eb61d7edbebef12e">discord_cache_get()</a>.</p>

</div>
</div>
<a id="a296a64475d6debc510dace71c0291c76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a296a64475d6debc510dace71c0291c76">&#9670;&nbsp;</a></span>discord_cache_get_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdiscord__message.html">discord_message</a>* discord_cache_get_message </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves a message by ID in the cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>struct discord_message* Pointer to the message struct. NULL if the message is not in the cache. </dd></dl>

<p class="reference">References <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa6af48f8fcedaa55454ebb742bb48396e">DISCO_MESSAGE_CACHE</a>, and <a class="el" href="cache_8c.html#aa5366c2d4251b830eb61d7edbebef12e">discord_cache_get()</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___message___commands.html#ga15f3a08908e247787c3a98c674e2e2ce">discord_get_message()</a>, and <a class="el" href="event_8c.html#ac3984c74b045e0afadbf2f69ed76f597">event_handle()</a>.</p>

</div>
</div>
<a id="a4d8331ae5a2c94953a5e668299668011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d8331ae5a2c94953a5e668299668011">&#9670;&nbsp;</a></span>discord_cache_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int discord_cache_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>message_cache_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channel_cache_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>guild_cache_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache_8h.html#a3a2c76967f7fd059bb4ca547a911599e">cache_destroy_callback_fn</a>&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes all the caches. </p>
<p>Should be called once when starting up the bot. Once the max cache size is reached, the oldest messages/channels/guilds will start to be cleaned up. Any time an object is edited on Discord, its "TTL" will be renewed in the cache.</p>
<p>The minimum cache size is 2, because edits require both the old and new object in the cache. Any number lower than 2 will result in the cache being set to 2.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message_cache_size</td><td>Maximum amount of messages the cache can hold (&gt; 1) </td></tr>
    <tr><td class="paramname">channel_cache_size</td><td>Maximum amount of channels the cache can hold (&gt; 1) </td></tr>
    <tr><td class="paramname">guild_cache_size</td><td>Maximum amount of guilds the cache can hold (&gt; 1) </td></tr>
    <tr><td class="paramname">callback</td><td>Callback that is called whenever a structure is taken out of the cache. It is up to the user if the structure should be freed or what happens to it. Keep it NULL to have the structures be freed up. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if succeeded, 1 otherwise </dd></dl>

<p class="reference">References <a class="el" href="cache_8c.html#a069029f5476e51f2a2978b9f32eb1861">channels_map</a>, <a class="el" href="cache_8c.html#a676ccc5ac8c134cdb237ee1889a49706">channels_queue</a>, <a class="el" href="disco__logging_8h.html#ac9349f26bc8e4e8e0a3e2643f9c5b928">d_log_err</a>, <a class="el" href="disco__logging_8h.html#a316cacf7ee1e1dacebad5ab1dfb0a509">d_log_notice</a>, <a class="el" href="cache_8c.html#a1dbbf43aa4a7a4e8073bc72c8d08986a">default_destroy_callback()</a>, <a class="el" href="cache_8c.html#a64447acacfa22d39689a8cea43560939">destroy_item_callback_fn</a>, <a class="el" href="cache_8c.html#a37b932c9356ec20b4ec3dabc18074781">guilds_map</a>, <a class="el" href="cache_8c.html#a91da2e78aae387f8009aa28741255488">guilds_queue</a>, <a class="el" href="structbuffer.html#a1d6fe81b3ccc1b5ff1253ea6eac1a300">buffer::head</a>, <a class="el" href="cache_8c.html#a32bfdb5f5eacbfaf13e4cdc0ad1b1bae">max_channel_cache_size</a>, <a class="el" href="cache_8c.html#ad81b87cde997b20dfecd65ea9e36ebac">max_guild_cache_size</a>, <a class="el" href="cache_8c.html#a30554163527f83bc3897325522c7de8c">max_message_cache_size</a>, <a class="el" href="cache_8c.html#aae79345d0d5fe7ade7fc06b746ed93fd">messages_map</a>, <a class="el" href="cache_8c.html#abae5844af77f07ebc5ec8630d2392af7">messages_queue</a>, and <a class="el" href="structbuffer.html#af3f397315f9d1257c0b271d6692c9e14">buffer::size</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___client.html#gab4c31f13fcbde9d2441bd7f2397983c1">discord_start_bot()</a>.</p>

</div>
</div>
<a id="a215176bc3913ce064686502970de2a30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a215176bc3913ce064686502970de2a30">&#9670;&nbsp;</a></span>discord_cache_set_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int discord_cache_set_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdiscord__channel.html">discord_channel</a> *&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a channel to the cache by ID. </p>
<p>If it already exists in cache, it frees and overwrites the previous entry. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

<p class="reference">References <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa3a2f910ba186e0dabbd5f1cb3f407596">DISCO_CHANNEL_CACHE</a>, and <a class="el" href="cache_8c.html#afa32f0b9ef9d24b124394bc8aa2dd355">discord_cache_set()</a>.</p>

<p class="reference">Referenced by <a class="el" href="event_8c.html#ac3984c74b045e0afadbf2f69ed76f597">event_handle()</a>.</p>

</div>
</div>
<a id="ad143b7c2d82fce0dc2cd2cabce1f1d3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad143b7c2d82fce0dc2cd2cabce1f1d3e">&#9670;&nbsp;</a></span>discord_cache_set_guild()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int discord_cache_set_guild </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdiscord__guild.html">discord_guild</a> *&#160;</td>
          <td class="paramname"><em>guild</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a guild to the cache by ID. </p>
<p>If it already exists in cache, it frees and overwrites the previous entry. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">guild</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

<p class="reference">References <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa41bf87ec949bbcf37d261b6d5c339b98">DISCO_GUILD_CACHE</a>, and <a class="el" href="cache_8c.html#afa32f0b9ef9d24b124394bc8aa2dd355">discord_cache_set()</a>.</p>

</div>
</div>
<a id="a0d885224d57ff6aa08ece206a1e44586"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d885224d57ff6aa08ece206a1e44586">&#9670;&nbsp;</a></span>discord_cache_set_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int discord_cache_set_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdiscord__message.html">discord_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a message to the cache by ID. </p>
<p>If it already exists in cache, it frees and overwrites the previous entry. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

<p class="reference">References <a class="el" href="cache_8h.html#a85169eef86ba65be6fcacdc0c0ae111fa6af48f8fcedaa55454ebb742bb48396e">DISCO_MESSAGE_CACHE</a>, and <a class="el" href="cache_8c.html#afa32f0b9ef9d24b124394bc8aa2dd355">discord_cache_set()</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___message___commands.html#ga001911743cb204978707d5669badd6ad">discord_fetch_message()</a>, <a class="el" href="group___message___commands.html#gad6ee7f866673f13d71b90fb0b8a337d6">discord_get_messages()</a>, and <a class="el" href="event_8c.html#ac3984c74b045e0afadbf2f69ed76f597">event_handle()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
